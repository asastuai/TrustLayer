<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TrustLayer ‚Äî Is your AI skill safe?</title>
  <link rel="icon" type="image/png" href="/logo.png" />
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { background: #0a0a0f; color: #e2e8f0; font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; min-height: 100vh; }
    a { color: inherit; text-decoration: none; }

    /* NAV */
    nav { display: flex; align-items: center; justify-content: space-between; padding: 18px 40px; border-bottom: 1px solid rgba(255,255,255,0.06); position: sticky; top: 0; background: rgba(10,10,15,0.9); backdrop-filter: blur(12px); z-index: 100; }
    .logo { display: flex; align-items: center; gap: 10px; font-size: 18px; font-weight: 700; }
    .logo-icon { width: 32px; height: 32px; object-fit: contain; }
    .nav-links { display: flex; gap: 24px; font-size: 14px; color: #94a3b8; }
    .nav-links a:hover { color: #e2e8f0; }
    .nav-cta { background: linear-gradient(135deg, #6366f1, #a855f7); padding: 8px 20px; border-radius: 8px; font-size: 14px; font-weight: 600; }

    /* HERO */
    .hero { text-align: center; padding: 90px 20px 70px; position: relative; overflow: hidden; }
    .hero::before { content: ''; position: absolute; top: -150px; left: 50%; transform: translateX(-50%); width: 700px; height: 500px; background: radial-gradient(ellipse, rgba(99,102,241,0.12) 0%, transparent 70%); pointer-events: none; }
    .badge { display: inline-flex; align-items: center; gap: 6px; background: rgba(16,185,129,0.1); border: 1px solid rgba(16,185,129,0.25); color: #6ee7b7; padding: 6px 16px; border-radius: 100px; font-size: 13px; margin-bottom: 28px; }
    .badge-dot { width: 6px; height: 6px; background: #10b981; border-radius: 50%; animation: pulse 2s infinite; }
    @keyframes pulse { 0%,100%{opacity:1} 50%{opacity:0.4} }
    h1 { font-size: clamp(32px, 5.5vw, 64px); font-weight: 800; line-height: 1.1; margin-bottom: 20px; }
    h1 span { background: linear-gradient(135deg, #6366f1, #a855f7); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    .subtitle { font-size: clamp(15px, 2vw, 19px); color: #64748b; max-width: 540px; margin: 0 auto 40px; line-height: 1.7; }
    .hero-actions { display: flex; gap: 14px; justify-content: center; flex-wrap: wrap; margin-bottom: 20px; }
    .btn-primary { background: linear-gradient(135deg, #6366f1, #a855f7); padding: 14px 28px; border-radius: 10px; font-size: 15px; font-weight: 600; transition: transform 0.2s, box-shadow 0.2s; box-shadow: 0 0 30px rgba(99,102,241,0.3); cursor: pointer; border: none; color: white; }
    .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 0 40px rgba(99,102,241,0.5); }
    .btn-secondary { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); padding: 14px 28px; border-radius: 10px; font-size: 15px; font-weight: 600; cursor: pointer; color: #e2e8f0; }
    .btn-secondary:hover { background: rgba(255,255,255,0.09); }
    .hero-note { font-size: 13px; color: #475569; }

    /* SECTION */
    .section { padding: 80px 20px; max-width: 900px; margin: 0 auto; }
    .section-eyebrow { font-size: 12px; font-weight: 700; letter-spacing: 2px; text-transform: uppercase; color: #6366f1; margin-bottom: 12px; text-align: center; }
    .section-title { font-size: clamp(24px, 4vw, 38px); font-weight: 800; margin-bottom: 14px; text-align: center; }
    .section-sub { color: #64748b; font-size: 16px; text-align: center; margin-bottom: 48px; line-height: 1.6; max-width: 560px; margin-left: auto; margin-right: auto; }

    /* SERVICE CARDS */
    .service-block { background: rgba(255,255,255,0.02); border: 1px solid rgba(255,255,255,0.08); border-radius: 20px; padding: 36px; margin-bottom: 24px; }
    .service-block:hover { border-color: rgba(99,102,241,0.25); }
    .service-top { display: flex; align-items: flex-start; gap: 20px; margin-bottom: 24px; }
    .service-emoji { font-size: 40px; line-height: 1; flex-shrink: 0; }
    .service-info { flex: 1; }
    .service-tag { font-size: 11px; font-weight: 700; letter-spacing: 1.5px; text-transform: uppercase; color: #6366f1; margin-bottom: 6px; }
    .service-name { font-size: 22px; font-weight: 800; margin-bottom: 8px; }
    .service-pitch { font-size: 15px; color: #94a3b8; line-height: 1.6; }
    .service-price-tag { display: inline-flex; align-items: center; gap: 6px; background: rgba(99,102,241,0.1); border: 1px solid rgba(99,102,241,0.2); color: #a5b4fc; padding: 6px 14px; border-radius: 20px; font-size: 13px; font-weight: 600; margin-top: 10px; }

    /* INTERACTIVE WIDGET */
    .widget { background: #0d0d14; border: 1px solid rgba(255,255,255,0.07); border-radius: 14px; padding: 24px; }
    .widget-label { font-size: 13px; font-weight: 600; color: #64748b; margin-bottom: 10px; display: flex; align-items: center; gap: 6px; }
    .widget-label span { color: #34d399; }
    input[type="text"], input[type="url"], textarea {
      width: 100%; background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.09);
      border-radius: 10px; padding: 12px 16px; color: #e2e8f0; font-size: 14px; outline: none;
      transition: border-color 0.2s; resize: none; font-family: inherit;
    }
    input:focus, textarea:focus { border-color: rgba(99,102,241,0.5); }
    input::placeholder, textarea::placeholder { color: #374151; }
    .widget-row { display: flex; gap: 10px; margin-top: 12px; align-items: center; flex-wrap: wrap; }
    .widget-btn { background: linear-gradient(135deg, #6366f1, #a855f7); border: none; border-radius: 8px; padding: 11px 22px; color: white; font-size: 14px; font-weight: 600; cursor: pointer; white-space: nowrap; transition: opacity 0.2s; }
    .widget-btn:hover { opacity: 0.85; }
    .widget-btn:disabled { opacity: 0.4; cursor: not-allowed; }
    .widget-note { font-size: 12px; color: #475569; flex: 1; }

    /* RESULT BOX */
    .result-box { margin-top: 16px; background: #070710; border: 1px solid rgba(255,255,255,0.06); border-radius: 10px; padding: 20px; display: none; }
    .result-box.show { display: block; }
    .result-header { display: flex; align-items: center; gap: 10px; margin-bottom: 14px; }
    .result-grade { font-size: 36px; font-weight: 900; }
    .result-grade.A { color: #34d399; }
    .result-grade.B { color: #6ee7b7; }
    .result-grade.C { color: #fbbf24; }
    .result-grade.D, .result-grade.F { color: #f87171; }
    .result-title { font-size: 16px; font-weight: 700; }
    .result-sub { font-size: 13px; color: #64748b; margin-top: 2px; }
    .result-bars { margin-top: 14px; display: flex; flex-direction: column; gap: 10px; }
    .bar-row { display: flex; align-items: center; gap: 10px; font-size: 13px; }
    .bar-label { color: #94a3b8; min-width: 120px; }
    .bar-track { flex: 1; height: 6px; background: rgba(255,255,255,0.06); border-radius: 3px; overflow: hidden; }
    .bar-fill { height: 100%; border-radius: 3px; transition: width 0.8s ease; }
    .bar-fill.good { background: linear-gradient(90deg, #10b981, #34d399); }
    .bar-fill.warn { background: linear-gradient(90deg, #f59e0b, #fbbf24); }
    .bar-fill.bad { background: linear-gradient(90deg, #ef4444, #f87171); }
    .bar-val { font-weight: 700; min-width: 36px; text-align: right; }
    .result-issues { margin-top: 14px; display: flex; flex-direction: column; gap: 6px; }
    .issue-item { display: flex; align-items: flex-start; gap: 8px; font-size: 13px; padding: 8px 12px; border-radius: 8px; }
    .issue-item.ok { background: rgba(16,185,129,0.08); color: #6ee7b7; }
    .issue-item.warn { background: rgba(245,158,11,0.08); color: #fcd34d; }
    .issue-item.bad { background: rgba(239,68,68,0.08); color: #fca5a5; }
    .result-cta { margin-top: 16px; font-size: 13px; color: #64748b; }
    .result-cta a { color: #a5b4fc; text-decoration: underline; }

    .loading-dots::after { content: ''; animation: dots 1.2s steps(3,end) infinite; }
    @keyframes dots { 0%{content:'.'} 33%{content:'..'} 66%{content:'...'} 100%{content:'.'} }

    /* DIVIDER */
    .divider { border: none; border-top: 1px solid rgba(255,255,255,0.05); margin: 0; }

    /* TRUST STRIP */
    .trust-strip { background: rgba(255,255,255,0.02); border-top: 1px solid rgba(255,255,255,0.05); border-bottom: 1px solid rgba(255,255,255,0.05); padding: 28px 20px; }
    .trust-inner { max-width: 800px; margin: 0 auto; display: flex; justify-content: center; gap: 48px; flex-wrap: wrap; }
    .trust-item { text-align: center; }
    .trust-val { font-size: 26px; font-weight: 800; background: linear-gradient(135deg, #6366f1, #a855f7); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    .trust-label { font-size: 12px; color: #475569; margin-top: 4px; }

    /* HOW IT WORKS */
    .steps { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 20px; }
    .step { text-align: center; padding: 24px 16px; }
    .step-num { width: 44px; height: 44px; border-radius: 50%; background: linear-gradient(135deg, #6366f1, #a855f7); display: flex; align-items: center; justify-content: center; font-weight: 800; font-size: 16px; margin: 0 auto 14px; }
    .step-title { font-weight: 700; margin-bottom: 6px; font-size: 15px; }
    .step-desc { font-size: 13px; color: #64748b; line-height: 1.6; }

    /* FOOTER */
    footer { border-top: 1px solid rgba(255,255,255,0.05); padding: 32px 40px; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 12px; color: #475569; font-size: 13px; }
    .footer-links { display: flex; gap: 20px; }
    .footer-links a:hover { color: #94a3b8; }
  </style>
</head>
<body>

  <nav>
    <a href="/" class="logo">
      <img class="logo-icon" src="/logo.png" alt="TrustLayer" />
      TrustLayer
    </a>
    <div class="nav-links">
      <a href="/docs">API Docs</a>
      <a href="/status">Live Status</a>
      <a href="https://github.com/asastuai/TrustLayer" target="_blank">GitHub</a>
    </div>
    <a class="nav-cta" href="#scan">Try it free ‚Üí</a>
  </nav>

  <!-- HERO -->
  <section class="hero">
    <div class="badge"><span class="badge-dot"></span> Live on Base ¬∑ Powered by x402</div>
    <h1>Before you use an AI skill,<br /><span>know if it's safe.</span></h1>
    <p class="subtitle">TrustLayer scans, tests, and monitors AI agent skills so you don't have to find out the hard way. Instant results, no account needed.</p>
    <div class="hero-actions">
      <button class="btn-primary" onclick="document.getElementById('scan-section').scrollIntoView({behavior:'smooth'})">Scan a skill now ‚Äî free</button>
      <button class="btn-secondary" onclick="document.getElementById('qa-section').scrollIntoView({behavior:'smooth'})">Test an agent</button>
    </div>
    <div class="hero-note">Pay only for what you use ¬∑ as little as $0.01 per scan ¬∑ USDC on Base</div>
  </section>

  <div class="trust-strip">
    <div class="trust-inner">
      <div class="trust-item"><div class="trust-val">100+</div><div class="trust-label">Security patterns checked</div></div>
      <div class="trust-item"><div class="trust-val">$0.01</div><div class="trust-label">Per skill scan</div></div>
      <div class="trust-item"><div class="trust-val">60s</div><div class="trust-label">Uptime monitoring interval</div></div>
      <div class="trust-item"><div class="trust-val">Base</div><div class="trust-label">Payments on-chain</div></div>
    </div>
  </div>

  <!-- CLAWSCAN -->
  <div class="section" id="scan-section">
    <div class="section-eyebrow">ClawScan</div>
    <div class="section-title">Is this skill safe to install?</div>
    <div class="section-sub">Paste a link to any AI skill or drop in its content. We'll tell you in seconds if there's anything sketchy ‚Äî before it runs on your system.</div>

    <div class="service-block">
      <div class="service-top">
        <div class="service-emoji">üõ°Ô∏è</div>
        <div class="service-info">
          <div class="service-tag">Security Scanner</div>
          <div class="service-name">Scan any skill instantly</div>
          <div class="service-pitch">We check for hidden instructions, credential theft attempts, suspicious external calls, and over 100 other red flags. Same intelligence used to detect the ClawHavoc campaign.</div>
          <div class="service-price-tag">‚úÖ Quick scan ‚Äî $0.01 USDC &nbsp;¬∑&nbsp; üèÖ Verified badge ‚Äî $2.00 USDC</div>
        </div>
      </div>
      <div class="widget">
        <div class="widget-label">üìé Paste a GitHub/raw URL to a SKILL.md, or type the skill name: <span>free lookup first</span></div>
        <input type="url" id="scan-url" placeholder="https://raw.githubusercontent.com/.../SKILL.md  or  skill-name" />
        <div class="widget-row">
          <button class="widget-btn" onclick="runScan()">üîç Scan it</button>
          <div class="widget-note">Takes ~2 seconds ¬∑ Results saved publicly for others to see</div>
        </div>
        <div class="result-box" id="scan-result"></div>
      </div>
    </div>
  </div>

  <hr class="divider" />

  <!-- QABOT -->
  <div class="section" id="qa-section">
    <div class="section-eyebrow">QABot</div>
    <div class="section-title">Does this agent actually work?</div>
    <div class="section-sub">Enter the URL of any AI agent and we run a full test suite ‚Äî checking if it responds, handles payments correctly, and doesn't leak sensitive data.</div>

    <div class="service-block">
      <div class="service-top">
        <div class="service-emoji">üß™</div>
        <div class="service-info">
          <div class="service-tag">Agent QA Testing</div>
          <div class="service-name">Get a report card for any agent</div>
          <div class="service-pitch">Whether you built it or you're about to use it ‚Äî know if the agent is reliable. We test availability, x402 compliance, response quality, and whether it can be tricked into leaking secrets.</div>
          <div class="service-price-tag">‚ö° Quick test ‚Äî $0.05 &nbsp;¬∑&nbsp; üî¨ Full suite ‚Äî $0.50 &nbsp;¬∑&nbsp; üß® Adversarial ‚Äî $1.00</div>
        </div>
      </div>
      <div class="widget">
        <div class="widget-label">üåê Agent URL to test:</div>
        <input type="url" id="qa-url" placeholder="https://your-agent.up.railway.app" />
        <div class="widget-row">
          <button class="widget-btn" onclick="runQA('quick')">‚ö° Quick test ‚Äî $0.05</button>
          <button class="widget-btn" style="background:rgba(255,255,255,0.06);border:1px solid rgba(255,255,255,0.1)" onclick="runQA('lookup')">üîç Look up past results (free)</button>
          <div class="widget-note">Report card is public ¬∑ shareable link included</div>
        </div>
        <div class="result-box" id="qa-result"></div>
      </div>
    </div>
  </div>

  <hr class="divider" />

  <!-- SENTINEL -->
  <div class="section" id="monitor-section">
    <div class="section-eyebrow">Sentinel</div>
    <div class="section-title">Is it still up?</div>
    <div class="section-sub">Register any URL and we'll ping it every 60 seconds ‚Äî forever, for free. Get uptime stats, latency history, and a spot on the public leaderboard.</div>

    <div class="service-block">
      <div class="service-top">
        <div class="service-emoji">üì°</div>
        <div class="service-info">
          <div class="service-tag">Uptime Monitor</div>
          <div class="service-name">Free monitoring for any service</div>
          <div class="service-pitch">Register once and we track it forever. See uptime percentage, average latency, and whether it correctly handles x402 payments. The detailed report with 30-day history costs just $0.01.</div>
          <div class="service-price-tag">üì° Monitoring ‚Äî free &nbsp;¬∑&nbsp; üìä Detailed report ‚Äî $0.01</div>
        </div>
      </div>
      <div class="widget">
        <div class="widget-label">üåê URL to monitor:</div>
        <input type="url" id="sentinel-url" placeholder="https://my-agent.up.railway.app" />
        <input type="text" id="sentinel-name" placeholder="Give it a name (optional)" style="margin-top:8px" />
        <div class="widget-row">
          <button class="widget-btn" onclick="registerSentinel()">üì° Start monitoring ‚Äî free</button>
          <div class="widget-note">First ping in ~60 seconds</div>
        </div>
        <div class="result-box" id="sentinel-result"></div>
      </div>
    </div>

    <!-- Live status preview -->
    <div style="margin-top:16px;font-size:14px;color:#64748b;text-align:center">
      Currently monitoring <strong id="service-count" style="color:#a5b4fc">...</strong> services ¬∑ 
      <a href="/status" style="color:#a5b4fc">View live dashboard ‚Üí</a>
    </div>
  </div>

  <hr class="divider" />

  <!-- CLAWVAULT -->
  <div class="section" id="vault-section">
    <div class="section-eyebrow">ClawVault</div>
    <div class="section-title">Paying an agent? Protect yourself.</div>
    <div class="section-sub">Send USDC to another agent safely ‚Äî the money is held in escrow until they deliver. If they don't, you get it back. Simple as that.</div>

    <div class="service-block">
      <div class="service-top">
        <div class="service-emoji">üîê</div>
        <div class="service-info">
          <div class="service-tag">Payment Escrow ¬∑ Beta</div>
          <div class="service-name">Safe agent-to-agent payments</div>
          <div class="service-pitch">You hire an agent, you agree on what they'll deliver, and we hold the USDC until the job is done. No trust required ‚Äî only results. 
          <br/><br/>‚ö†Ô∏è <em>ClawVault is currently in centralized beta ‚Äî funds are custodied by TrustLayer. Use for small amounts. Smart contract version coming in V2.</em></div>
          <div class="service-price-tag">üîê Create escrow ‚Äî $0.10 &nbsp;¬∑&nbsp; ‚öñÔ∏è Dispute resolution ‚Äî $0.50</div>
        </div>
      </div>
      <div class="widget">
        <div class="widget-label">Quick escrow setup:</div>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px">
          <input type="text" id="vault-buyer" placeholder="Your wallet address (0x...)" />
          <input type="text" id="vault-seller" placeholder="Agent's wallet address (0x...)" />
          <input type="text" id="vault-amount" placeholder='Amount in USDC (e.g. "5.00")' />
          <input type="text" id="vault-desc" placeholder="What will they deliver?" />
        </div>
        <div class="widget-row">
          <button class="widget-btn" onclick="createVault()">üîê Create escrow ‚Äî $0.10</button>
          <div class="widget-note">Funds held safely until delivery is confirmed</div>
        </div>
        <div class="result-box" id="vault-result"></div>
      </div>
    </div>
  </div>

  <!-- HOW IT WORKS -->
  <hr class="divider" />
  <div class="section">
    <div class="section-eyebrow">How it works</div>
    <div class="section-title">No accounts. No subscriptions.</div>
    <div class="section-sub">Pay only for what you use, with USDC on Base. Your AI agent can do it automatically.</div>
    <div class="steps">
      <div class="step"><div class="step-num">1</div><div class="step-title">Pick a service</div><div class="step-desc">Scan a skill, test an agent, start monitoring, or create an escrow ‚Äî your call.</div></div>
      <div class="step"><div class="step-num">2</div><div class="step-title">Pay a tiny fee</div><div class="step-desc">As little as $0.01 in USDC on Base. No subscription, no account ‚Äî just a one-time micro-payment.</div></div>
      <div class="step"><div class="step-num">3</div><div class="step-title">Get your result</div><div class="step-desc">Instant report, public result page, and a shareable link. Everything logged on-chain.</div></div>
      <div class="step"><div class="step-num">4</div><div class="step-title">Share it</div><div class="step-desc">Show your scan badge, share your agent's test report, or link to your uptime stats. Trust is visible.</div></div>
    </div>
  </div>

  <footer>
    <div>¬© 2026 TrustLayer ¬∑ Built on Base ¬∑ Payments via x402</div>
    <div class="footer-links">
      <a href="/docs">API</a>
      <a href="/status">Status</a>
      <a href="https://github.com/asastuai/TrustLayer" target="_blank">GitHub</a>
    </div>
  </footer>

  <script>
    const BASE = '';

    // Load service count
    fetch(BASE + '/api/v1/sla/live').then(r => r.json()).then(d => {
      document.getElementById('service-count').textContent = d.length || 0;
    }).catch(() => {});

    function showResult(id, html) {
      const el = document.getElementById(id);
      el.innerHTML = html;
      el.classList.add('show');
    }

    function gradeColor(score) {
      if (score >= 80) return 'A';
      if (score >= 65) return 'B';
      if (score >= 50) return 'C';
      if (score >= 35) return 'D';
      return 'F';
    }

    function barClass(score) {
      if (score >= 70) return 'good';
      if (score >= 40) return 'warn';
      return 'bad';
    }

    // ‚îÄ‚îÄ CLAWSCAN ‚îÄ‚îÄ
    async function runScan() {
      const url = document.getElementById('scan-url').value.trim();
      if (!url) return;

      showResult('scan-result', '<div style="color:#64748b;font-size:14px">üîç Scanning<span class="loading-dots"></span></div>');

      // Try free lookup first
      const name = url.split('/').pop()?.replace('.md','') || url;
      try {
        const look = await fetch(BASE + '/api/v1/skill/lookup?name=' + encodeURIComponent(name));
        const d = await look.json();
        if (d.found) { renderScanResult(d); return; }
      } catch {}

      // Not found ‚Äî show message directing to API
      showResult('scan-result', `
        <div style="font-size:14px;color:#94a3b8;line-height:1.7">
          <div style="font-size:16px;font-weight:700;color:#e2e8f0;margin-bottom:8px">üîç Ready to scan</div>
          No previous scan found for this skill. To run a fresh scan, your x402-compatible agent can call:<br/><br/>
          <code style="background:#0a0a0f;border:1px solid rgba(255,255,255,0.08);padding:10px 14px;border-radius:8px;display:block;font-size:12px;color:#a5b4fc;margin-bottom:12px">POST /api/v1/skill/scan<br/>{ "url": "${url}" }<br/>// Costs $0.01 USDC via x402</code>
          <a href="/docs#scan" style="color:#a5b4fc;text-decoration:underline">See full docs ‚Üí</a>
        </div>`);
    }

    function renderScanResult(d) {
      const grade = gradeColor(d.score);
      const cats = d.categories || {};
      showResult('scan-result', `
        <div class="result-header">
          <div class="result-grade ${grade}">${grade}</div>
          <div>
            <div class="result-title">${d.skillId || 'Skill'} ‚Äî Trust Score: ${d.score}/100</div>
            <div class="result-sub">Risk level: <strong style="color:${d.riskLevel==='low'?'#34d399':d.riskLevel==='medium'?'#fbbf24':'#f87171'}">${d.riskLevel?.toUpperCase()}</strong> ¬∑ ${d.passed ? '‚úÖ Passed' : '‚ùå Failed'}</div>
          </div>
        </div>
        ${Object.keys(cats).length ? `<div class="result-bars">${Object.entries(cats).map(([k,v])=>`
          <div class="bar-row">
            <div class="bar-label">${k.replace('_',' ')}</div>
            <div class="bar-track"><div class="bar-fill ${barClass(v)}" style="width:${v}%"></div></div>
            <div class="bar-val" style="color:${v>=70?'#34d399':v>=40?'#fbbf24':'#f87171'}">${v}</div>
          </div>`).join('')}</div>` : ''}
        ${d.issues?.length ? `<div class="result-issues">${d.issues.slice(0,4).map(i=>`
          <div class="issue-item ${i.severity==='CRITICAL'||i.severity==='HIGH'?'bad':i.severity==='MEDIUM'?'warn':'ok'}">
            ${i.severity==='CRITICAL'?'üö®':i.severity==='HIGH'?'‚ö†Ô∏è':i.severity==='MEDIUM'?'‚ö°':'‚úì'} ${i.detail}
          </div>`).join('')}</div>` : '<div class="issue-item ok">‚úÖ No issues detected ‚Äî this skill looks clean.</div>'}
        <div class="result-cta">Want the full deep-verified badge? <a href="/docs#verify">Run a deep verification for $2.00 ‚Üí</a></div>
      `);
    }

    // ‚îÄ‚îÄ QABOT ‚îÄ‚îÄ
    async function runQA(type) {
      const url = document.getElementById('qa-url').value.trim();
      if (!url) return;

      if (type === 'lookup') {
        showResult('qa-result', '<div style="color:#64748b;font-size:14px">üîç Looking up<span class="loading-dots"></span></div>');
        try {
          const r = await fetch(BASE + '/api/v1/qa/lookup?url=' + encodeURIComponent(url));
          const d = await r.json();
          if (d) { renderQAResult(d); return; }
        } catch {}
        showResult('qa-result', '<div style="font-size:14px;color:#94a3b8">No past results found for this agent. Run a test first.</div>');
        return;
      }

      showResult('qa-result', `
        <div style="font-size:14px;color:#94a3b8;line-height:1.7">
          <div style="font-size:16px;font-weight:700;color:#e2e8f0;margin-bottom:8px">üß™ Ready to test</div>
          Send an x402-payment request to run the quick test suite ($0.05 USDC):<br/><br/>
          <code style="background:#0a0a0f;border:1px solid rgba(255,255,255,0.08);padding:10px 14px;border-radius:8px;display:block;font-size:12px;color:#a5b4fc;margin-bottom:12px">POST /api/v1/qa/test<br/>{ "target_url": "${url}" }<br/>// Costs $0.05 USDC via x402</code>
          <a href="/docs#qa-test" style="color:#a5b4fc;text-decoration:underline">See full docs ‚Üí</a>
        </div>`);
    }

    function renderQAResult(d) {
      const grade = gradeColor(d.score);
      const tests = d.results || [];
      showResult('qa-result', `
        <div class="result-header">
          <div class="result-grade ${grade}">${grade}</div>
          <div>
            <div class="result-title">Agent Score: ${d.score}/100</div>
            <div class="result-sub">${d.testType} ¬∑ ${d.passed ? '‚úÖ Passed all tests' : '‚ö†Ô∏è Some tests failed'}</div>
          </div>
        </div>
        ${Array.isArray(tests) && tests.length ? `<div class="result-issues">${tests.slice(0,5).map(t=>`
          <div class="issue-item ${t.passed?'ok':'bad'}">${t.passed?'‚úì':'‚úó'} ${t.name} ‚Äî ${t.detail||''}</div>`).join('')}</div>` : ''}
      `);
    }

    // ‚îÄ‚îÄ SENTINEL ‚îÄ‚îÄ
    async function registerSentinel() {
      const url = document.getElementById('sentinel-url').value.trim();
      const name = document.getElementById('sentinel-name').value.trim();
      if (!url) return;

      showResult('sentinel-result', '<div style="color:#64748b;font-size:14px">üì° Registering<span class="loading-dots"></span></div>');
      try {
        const r = await fetch(BASE + '/api/v1/sla/register', {
          method: 'POST', headers: {'Content-Type':'application/json'},
          body: JSON.stringify({ url, name: name || null })
        });
        const d = await r.json();
        if (r.ok) {
          showResult('sentinel-result', `
            <div class="issue-item ok">‚úÖ Registered! Pinging <strong>${url}</strong> every 60 seconds.</div>
            <div style="margin-top:10px;font-size:13px;color:#64748b">
              First results in ~1 minute ¬∑ <a href="/status" style="color:#a5b4fc">View live dashboard ‚Üí</a>
            </div>`);
          document.getElementById('service-count').textContent = (parseInt(document.getElementById('service-count').textContent) || 0) + 1;
        } else {
          showResult('sentinel-result', `<div class="issue-item bad">‚ö†Ô∏è ${d.error || 'Could not register. Try again.'}</div>`);
        }
      } catch {
        showResult('sentinel-result', `<div class="issue-item bad">‚ö†Ô∏è Network error. Please try again.</div>`);
      }
    }

    // ‚îÄ‚îÄ CLAWVAULT ‚îÄ‚îÄ
    async function createVault() {
      const buyer = document.getElementById('vault-buyer').value.trim();
      const seller = document.getElementById('vault-seller').value.trim();
      const amount = document.getElementById('vault-amount').value.trim();
      const desc = document.getElementById('vault-desc').value.trim();
      if (!buyer || !seller || !amount || !desc) {
        showResult('vault-result', '<div class="issue-item warn">‚ö†Ô∏è Please fill in all fields before creating an escrow.</div>');
        return;
      }
      showResult('vault-result', `
        <div style="font-size:14px;color:#94a3b8;line-height:1.7">
          <div style="font-size:16px;font-weight:700;color:#e2e8f0;margin-bottom:8px">üîê Ready to create escrow</div>
          Send an x402-payment request to create this escrow ($0.10 USDC fee):<br/><br/>
          <code style="background:#0a0a0f;border:1px solid rgba(255,255,255,0.08);padding:10px 14px;border-radius:8px;display:block;font-size:12px;color:#a5b4fc;margin-bottom:12px">POST /api/v1/escrow/create<br/>{<br/>  "buyer_address": "${buyer}",<br/>  "seller_address": "${seller}",<br/>  "amount_usdc": "${amount}",<br/>  "service_description": "${desc}"<br/>}<br/>// Fee: $0.10 USDC via x402</code>
          <a href="/docs#escrow-create" style="color:#a5b4fc;text-decoration:underline">See full escrow docs ‚Üí</a>
        </div>`);
    }
  </script>
</body>
</html>
